<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact | Tre Coleman</title>
    <meta
      name="description"
      content="Tell me your bottleneck. Get a simple first step today." />
    <!-- Relative CSS path for GitHub Pages -->
    <link rel="stylesheet" href="style.css" />
    <!-- Form submission is handled via a script at the bottom of the page -->
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
        <div class="logo"><a href="index.html" style="color: white;">Tre Coleman</a></div>
        <nav>
          <ul>
            <li><a href="services.html">Services</a></li>
            <li><a href="case-studies.html">Case Studies</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html" aria-current="page">Contact</a></li>
            <li><a href="https://calendly.com/ph_tre" class="button" target="_blank" rel="noopener">Book a call</a></li>
          </ul>
        </nav>
      </div>
    </header>
    
    <section>
      <div class="container">
        <h1 class="mb-2">Let’s talk</h1>
        <p class="mb-2">Tell me where the bottleneck is. I’ll share a simple first step you can take this week.</p>
        <form id="contactForm" action="https://formsubmit.co/ph_tre@yahoo.com" method="POST" novalidate>
          <div>
            <label>Name
              <input name="name" required />
            </label>
          </div>
          <div>
            <label>Email
              <input type="email" name="email" required />
            </label>
          </div>
          <div>
            <label>Company
              <input name="company" />
            </label>
          </div>
          <div>
            <label>Phone (optional)
              <input name="phone" />
            </label>
          </div>
          <div>
            <label>Location
              <input name="location" />
            </label>
          </div>
          <div>
            <label>Biggest bottleneck
              <textarea name="bottleneck" rows="4" required></textarea>
            </label>
          </div>
          <div>
            <label>Budget range
              <select name="budget">
                <option value="">Select…</option>
                <option>&lt;$2k</option>
                <option>$2k–$5k</option>
                <option>$5k–$10k</option>
                <option>$10k+</option>
              </select>
            </label>
          </div>
          <div>
            <label>Preferred start
              <select name="start">
                <option value="">Select…</option>
                <option>ASAP</option>
                <option>Next 30 days</option>
                <option>Next quarter</option>
              </select>
            </label>
          </div>
          <!-- Anti-spam & metadata -->
          <input type="text" name="website" tabindex="-1" autocomplete="off" style="position:absolute;left:-9999px;">
          <input type="hidden" name="_subject" value="New Lead from TreColeman.co">
          <input type="hidden" name="_autoresponse" value="Thanks for reaching out — I’ll review and reply shortly. If you’d like to book now: https://calendly.com/ph_tre">
          <input type="hidden" name="_next" id="nextUrl" value="">
          <input type="hidden" name="utm_source">
          <input type="hidden" name="utm_medium">
          <input type="hidden" name="utm_campaign">
          <input type="hidden" name="_captcha" value="true">
          <button type="submit" class="button" style="margin-top:1rem;">Get my plan</button>
        </form>
        <!-- Inline Calendly embed -->
        <div class="mt-2">
          <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
          <script src="https://assets.calendly.com/assets/external/widget.js" async></script>
          <div class="calendly-inline-widget" data-url="https://calendly.com/ph_tre" style="min-width:320px;height:700px;"></div>
        </div>
      </div>
    </section>
    
    <!-- Footer -->
    <footer>
      <div class="container footer-content">
        <p>&copy; <span id="year"></span> Tre Coleman. All rights reserved.</p>
        <ul>
          <li><a href="services.html">Services</a></li>
          <li><a href="case-studies.html">Case Studies</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html" aria-current="page">Contact</a></li>
        </ul>
      </div>
    </footer>
    <script>
      // Set the current year in the footer
      document.getElementById('year').textContent = new Date().getFullYear();
      // Capture UTM parameters from the query string and populate hidden fields
      (function captureUTM() {
        const params = new URLSearchParams(location.search);
        ['utm_source','utm_medium','utm_campaign'].forEach(function(key) {
          const val = params.get(key);
          if (val) {
            const field = document.querySelector('[name="' + key + '"]');
            if (field) field.value = val;
          }
        });
      })();
      // Before submitting, build the _next URL to redirect to Calendly with prefilled name and email
      document.getElementById('contactForm').addEventListener('submit', function() {
        const form = this;
        const hp = form.querySelector('[name="website"]');
        // Honeypot: if filled, do nothing special
        if (hp && hp.value.trim() !== '') return;
        const nameVal = encodeURIComponent(form.elements.name.value || '');
        const emailVal = encodeURIComponent(form.elements.email.value || '');
        const calUrl = new URL('https://calendly.com/ph_tre');
        if (nameVal) calUrl.searchParams.set('name', decodeURIComponent(nameVal));
        if (emailVal) calUrl.searchParams.set('email', decodeURIComponent(emailVal));
        document.getElementById('nextUrl').value = calUrl.toString();
      });
    </script>
  </body>
</html>